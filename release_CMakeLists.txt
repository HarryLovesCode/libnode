cmake_minimum_required(VERSION 3.5)

project(libnode)

file(GLOB LIBNODE_ARCHIVES ${CMAKE_CURRENT_LIST_DIR}/lib/*)
set(LIBNODE_INCLUDE ${CMAKE_CURRENT_LIST_DIR}/include)

add_library(libnode INTERFACE)

if(UNIX AND NOT APPLE)
    target_link_libraries(libnode INTERFACE "-Wl,--start-group" ${LIBNODE_ARCHIVES} "-Wl,--end-group" "-pthread" "-ldl" "-lrt" "-lm" "-rdynamic")
elseif(WIN32)
	target_link_libraries(libnode INTERFACE ${LIBNODE_ARCHIVES} ws2_32 dbghelp crypt32 winmm iphlpapi psapi userenv)
	target_compile_options(libnode INTERFACE "/MT")
else()
	target_link_libraries(libnode INTERFACE ${LIBNODE_ARCHIVES})
endif()

target_include_directories(libnode INTERFACE ${LIBNODE_INCLUDE})
